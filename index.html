<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Para Mi Amor - ALEJ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #000000;
            color: #FFF;
            font-family: 'Mali', cursive;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Canvas 3D */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Contenedores */
        .container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
            padding: 20px;
        }

        /* Pantalla inicial */
        #click-overlay {
            background: rgba(0, 0, 0, 0.7);
            cursor: pointer;
            transition: all 0.5s ease;
        }

        #click-overlay h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            color: #ff85b3;
            margin-bottom: 20px;
            animation: pulse 2s infinite ease-in-out;
            text-shadow: 0 0 20px #ff6ba1;
        }

        #click-overlay p {
            font-size: clamp(1rem, 4vw, 1.5rem);
            color: #f8b7d8;
            margin: 10px 0;
        }

        /* Mensaje principal - SIN RECUADRO */
        #message-content {
            display: none;
        }

        .message {
            font-size: clamp(2.5rem, 10vw, 6rem);
            font-weight: 700;
            color: #ff9ec5;
            text-shadow: 
                0 0 20px #ff6ba1,
                0 0 40px #ff85b3,
                0 0 60px #ff9ec5;
            animation: 
                glow 3s ease-in-out infinite alternate,
                float 6s ease-in-out infinite;
            line-height: 1.2;
            text-align: center;
            white-space: pre-wrap;
        }

        /* Bot칩n de audio */
        .btn-audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 158, 197, 0.3);
            border: 2px solid #ff9ec5;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            color: #fff;
            font-size: 1.5rem;
            display: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(255, 158, 197, 0.5);
        }

        .btn-audio-toggle:hover {
            transform: scale(1.1);
            background: rgba(255, 158, 197, 0.5);
        }

        /* Efectos de part칤culas 2D */
        #particles-2d {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff9ec5;
            font-size: 1.5rem;
            z-index: 20;
            display: none;
        }

        /* Animaciones */
        @keyframes glow {
            0%, 100% {
                text-shadow: 
                    0 0 20px #ff6ba1,
                    0 0 40px #ff85b3,
                    0 0 60px #ff9ec5;
            }
            50% {
                text-shadow: 
                    0 0 30px #ff6ba1,
                    0 0 60px #ff85b3,
                    0 0 90px #ff9ec5;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .btn-audio-toggle {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
                top: 15px;
                right: 15px;
            }
            
            .message {
                font-size: clamp(2rem, 9vw, 4rem);
            }
        }
    </style>
</head>
<body>
    <!-- Canvas para Three.js -->
    <canvas id="three-canvas"></canvas>
    
    <!-- Canvas para part칤culas 2D -->
    <canvas id="particles-2d"></canvas>

    <!-- Audio -->
    <audio id="myAudio" loop>
        <source src="https://a128-z3.zmdcdn.me/d5e48d317636af55834b87b0fd9fd5fe?authen=exp=1762399955~acl=/d5e48d317636af55834b87b0fd9fd5fe*~hmac=537e951475297463e4a86ebf0646086e" type="audio/mpeg">
    </audio>

    <!-- Loading -->
    <div class="loading" id="loading">
        <i class="fas fa-heart fa-beat" style="color: #ff6ba1;"></i> Cargando nuestro amor...
    </div>

    <!-- Bot칩n de audio -->
    <button id="toggle-audio" class="btn-audio-toggle">
        <i id="audio-icon" class="fas fa-volume-high"></i>
    </button>

    <!-- Pantalla inicial -->
    <div class="container" id="click-overlay">
        <div>
            <h1>游눘 Toca Nuestro Amor 游눘</h1>
            <p>Presiona para comenzar nuestro viaje especial</p>
            <p style="font-size: 1.2rem; margin-top: 20px;">
                Con todo mi amor para ti, ALEJ 游눗
            </p>
        </div>
    </div>

    <!-- Mensaje principal -->
    <div class="container" id="message-content">
        <div class="message">I LOVE YOU SO MUCH\nMY ALEJ</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // ========== CONFIGURACI칍N INICIAL ==========
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Elementos DOM
        const overlay = document.getElementById('click-overlay');
        const messageContent = document.getElementById('message-content');
        const audio = document.getElementById('myAudio');
        const toggleAudioBtn = document.getElementById('toggle-audio');
        const audioIcon = document.getElementById('audio-icon');
        const loading = document.getElementById('loading');
        const particles2dCanvas = document.getElementById('particles-2d');
        const ctx2d = particles2dCanvas.getContext('2d');

        // Variables globales
        let isPlaying = false;
        let isInitialized = false;
        let scene, camera, renderer, controls;
        let hearts3D = [], floatingTexts = [], particles2d = [];
        let mouseX = 0, mouseY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;

        // Colores pastel rom치nticos
        const pastelColors = [
            '#FFB6C1', '#FFD1DC', '#FF9EC5', '#F8C8DC', '#F4A6B8',
            '#FF85B3', '#FF6BA1', '#FFB7C5', '#FFCCD5', '#FFDFE3'
        ];

        // Palabras rom치nticas
        const romanticWords = [
            "TE AMO", "FOREVER", "LOVE", "AMOR", "TI AMO", "TE QUIERO",
            "SOULMATE", "DESTINY", "PASSION", "ROMANCE", "DEVOTION",
            "AFFECTION", "SWEETHEART", "DARLING", "BELOVED", "ADORE",
            "CHERISH", "TREASURE", "HEART", "SOUL", "TOGETHER", "ALWAYS",
            "ETERNITY", "HAPPINESS", "JOY", "BLISS", "BEAUTIFUL", "PERFECT",
            "ANGEL", "DREAM", "MAGIC", "KISS", "HUG", "SMILE", "LAUGH"
        ];

        // ========== INICIALIZACI칍N ==========
        function init() {
            if (isInitialized) return;
            isInitialized = true;

            loading.style.display = 'block';
            
            // Iniciar Three.js inmediatamente
            initThreeJS();
            
            // Iniciar part칤culas 2D
            initParticles2D();
            
            // Intentar reproducir audio
            playAudio();
        }

        function playAudio() {
            audio.play().then(() => {
                completeInitialization();
            }).catch(error => {
                console.log('Audio requiere interacci칩n:', error);
                completeInitialization();
            });
        }

        function completeInitialization() {
            loading.style.display = 'none';
            overlay.style.display = 'none';
            messageContent.style.display = 'flex';
            toggleAudioBtn.style.display = 'block';
            isPlaying = true;
            
            startTypewriter();
            animateParticles2D();
        }

        // ========== THREE.JS - EFECTO 3D INMERSIVO ==========
        function initThreeJS() {
            // Escena
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            scene.fog = new THREE.Fog(0x000000, 50, 300);

            // C치mara
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 50);

            // Renderer
            renderer = new THREE.WebGLRenderer({ 
                canvas: document.getElementById('three-canvas'),
                alpha: true,
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));

            // Luces
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xff9ec5, 1);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            const pointLight = new THREE.PointLight(0xff6ba1, 1, 100);
            pointLight.position.set(0, 0, 50);
            scene.add(pointLight);

            // Crear corazones 3D
            createHearts3D();

            // Crear textos 3D flotantes
            createFloatingTexts3D();

            // Eventos de movimiento
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('touchmove', onTouchMove, { passive: true });

            // Animaci칩n
            animateThreeJS();

            // Resize
            window.addEventListener('resize', onWindowResize);
        }

        function createHearts3D() {
            const heartShape = new THREE.Shape();
            heartShape.moveTo(0, 0);
            heartShape.bezierCurveTo(2, 2, 4, 0, 0, -4);
            heartShape.bezierCurveTo(-4, 0, -2, 2, 0, 0);

            const extrudeSettings = {
                depth: 0.5,
                bevelEnabled: true,
                bevelThickness: 0.1,
                bevelSize: 0.1,
                bevelSegments: 8
            };

            for (let i = 0; i < 50; i++) {
                const geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(pastelColors[Math.floor(Math.random() * pastelColors.length)]),
                    transparent: true,
                    opacity: 0.8,
                    shininess: 100
                });

                const heart = new THREE.Mesh(geometry, material);
                
                // Posici칩n aleatoria en una esfera
                const radius = 30 + Math.random() * 50;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                
                heart.position.x = radius * Math.sin(phi) * Math.cos(theta);
                heart.position.y = radius * Math.sin(phi) * Math.sin(theta);
                heart.position.z = radius * Math.cos(phi);
                
                heart.rotation.x = Math.random() * Math.PI;
                heart.rotation.y = Math.random() * Math.PI;
                
                heart.userData = {
                    originalPosition: heart.position.clone(),
                    speed: Math.random() * 0.02 + 0.01,
                    angle: Math.random() * Math.PI * 2
                };

                scene.add(heart);
                hearts3D.push(heart);
            }
        }

        function createFloatingTexts3D() {
            // Usaremos esferas como placeholder para textos
            // En una implementaci칩n real, cargar칤amos fuentes 3D
            romanticWords.forEach((word, index) => {
                const geometry = new THREE.SphereGeometry(1, 8, 6);
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(pastelColors[index % pastelColors.length]),
                    transparent: true,
                    opacity: 0.7
                });

                const textMesh = new THREE.Mesh(geometry, material);
                
                const radius = 40 + Math.random() * 60;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                
                textMesh.position.x = radius * Math.sin(phi) * Math.cos(theta);
                textMesh.position.y = radius * Math.sin(phi) * Math.sin(theta);
                textMesh.position.z = radius * Math.cos(phi);
                
                textMesh.userData = {
                    originalPosition: textMesh.position.clone(),
                    speed: Math.random() * 0.01 + 0.005,
                    angle: Math.random() * Math.PI * 2,
                    word: word
                };

                scene.add(textMesh);
                floatingTexts.push(textMesh);
            });
        }

        function onMouseMove(event) {
            mouseX = (event.clientX - windowHalfX) * 0.0005;
            mouseY = (event.clientY - windowHalfY) * 0.0005;
        }

        function onTouchMove(event) {
            if (event.touches.length === 1) {
                mouseX = (event.touches[0].clientX - windowHalfX) * 0.0005;
                mouseY = (event.touches[0].clientY - windowHalfY) * 0.0005;
            }
        }

        function animateThreeJS() {
            requestAnimationFrame(animateThreeJS);

            const time = Date.now() * 0.001;

            // Animar corazones
            hearts3D.forEach((heart, index) => {
                heart.rotation.y += 0.01;
                heart.rotation.x = Math.sin(time + index) * 0.1;
                
                // Movimiento flotante
                heart.position.y = heart.userData.originalPosition.y + Math.sin(time + index) * 2;
                heart.position.x = heart.userData.originalPosition.x + Math.cos(time * 0.7 + index) * 1.5;
                
                // Pulsaci칩n
                const scale = 1 + Math.sin(time * 2 + index) * 0.2;
                heart.scale.setScalar(scale);
            });

            // Animar textos
            floatingTexts.forEach((text, index) => {
                text.rotation.y += 0.005;
                text.position.y = text.userData.originalPosition.y + Math.sin(time + index) * 3;
            });

            // Movimiento de c치mara inmersivo
            camera.position.x += (mouseX * 100 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 100 - camera.position.y) * 0.05;
            camera.lookAt(scene.position);

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // ========== PART칈CULAS 2D - CORAZONES ==========
        function initParticles2D() {
            particles2dCanvas.width = window.innerWidth;
            particles2dCanvas.height = window.innerHeight;

            // Crear part칤culas de corazones
            for (let i = 0; i < 30; i++) {
                particles2d.push({
                    x: Math.random() * particles2dCanvas.width,
                    y: Math.random() * particles2dCanvas.height,
                    size: Math.random() * 20 + 10,
                    speed: Math.random() * 2 + 0.5,
                    color: pastelColors[Math.floor(Math.random() * pastelColors.length)],
                    opacity: Math.random() * 0.5 + 0.3,
                    rotation: Math.random() * Math.PI * 2
                });
            }
        }

        function drawHeart2D(ctx, x, y, size, color, rotation) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(rotation);
            ctx.scale(size / 20, size / 20);
            
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(0, 0);
            for (let i = 0; i < 30; i++) {
                const t = i / 30 * Math.PI * 2;
                const px = 16 * Math.pow(Math.sin(t), 3);
                const py = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.closePath();
            ctx.fill();
            
            ctx.restore();
        }

        function animateParticles2D() {
            ctx2d.clearRect(0, 0, particles2dCanvas.width, particles2dCanvas.height);

            particles2d.forEach(particle => {
                particle.y -= particle.speed;
                particle.rotation += 0.02;

                if (particle.y < -particle.size) {
                    particle.y = particles2dCanvas.height + particle.size;
                    particle.x = Math.random() * particles2dCanvas.width;
                }

                drawHeart2D(ctx2d, particle.x, particle.y, particle.size, particle.color, particle.rotation);
            });

            requestAnimationFrame(animateParticles2D);
        }

        // ========== EFECTO M츼QUINA DE ESCRIBIR ==========
        function startTypewriter() {
            const message = document.querySelector('.message');
            const originalText = message.textContent;
            message.textContent = '';
            
            let i = 0;
            const typeWriter = () => {
                if (i < originalText.length) {
                    if (originalText.charAt(i) === '\\' && originalText.charAt(i + 1) === 'n') {
                        message.textContent += '\n';
                        i++;
                    } else {
                        message.textContent += originalText.charAt(i);
                    }
                    i++;
                    setTimeout(typeWriter, 100);
                }
            };
            setTimeout(typeWriter, 1000);
        }

        // ========== EVENT LISTENERS ==========
        overlay.addEventListener('click', init);
        overlay.addEventListener('touchend', init, { passive: false });

        toggleAudioBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                audioIcon.className = 'fas fa-volume-mute';
            } else {
                audio.play();
                audioIcon.className = 'fas fa-volume-high';
            }
            isPlaying = !isPlaying;
        });

        // Redimensionar part칤culas 2D cuando cambie el tama침o de la ventana
        window.addEventListener('resize', () => {
            particles2dCanvas.width = window.innerWidth;
            particles2dCanvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
