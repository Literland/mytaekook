<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
Â  Â  <title>My Taekook</title>
Â  Â  <link rel="preconnect" href="https://fonts.googleapis.com">
Â  Â  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
Â  Â  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
Â  Â  <!-- Pantalla de bienvenida -->
Â  Â  <div id="welcome-screen">
Â  Â  Â  Â  <div class="welcome-content">
Â  Â  Â  Â  Â  Â  <h1>ğŸ’œ Para my Princess nalgona hemosa ğŸ’œ</h1>
Â  Â  Â  Â  Â  Â  <p>Este universo fue creado con todo mi amor</p>
Â  Â  Â  Â  Â  Â  <p>para la mujer que ilumina mi vida</p>
Â  Â  Â  Â  Â  Â  <p style="margin-top: 30px; font-size: 1.1rem; color: var(--celeste-bebe);">
Â  Â  Â  Â  Â  Â  Â  Â  Nuestro amor brilla mÃ¡s que todas las estrellas juntas
Â  Â  Â  Â  Â  Â  Â  Â  Â¡DEJA YA LA PILLAERA, BV!
Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  <button class="start-button" onclick="startExperience()">
Â  Â  Â  Â  Â  Â  Â  Â  ğŸ’– Entra a Nuestro Mundo ğŸ’–
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  <div style="margin-top: 40px; font-size: 0.9rem; color: var(--lavanda);">
Â  Â  Â  Â  Â  Â  Â  Â  Â Forever ğŸ»â¤ï¸ğŸ°
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <!-- TransiciÃ³n entre escenas -->
Â  Â  <div id="scene-transition"></div>

Â  Â  <!-- Contenedor principal -->
Â  Â  <div id="experience-container">
Â  Â  Â  Â  <!-- Escena 1: JardÃ­n de Nieve -->
Â  Â  Â  Â  <div id="snow-garden" class="scene active"></div>

Â  Â  Â  Â  <!-- Escena 2: Universo Nuestro -->
Â  Â  Â  Â  <div id="universe" class="scene"></div>

Â  Â  Â  Â  <!-- Escena 3: Hogar -->
Â  Â  Â  Â  <div id="k-drama-home" class="scene"></div>

Â  Â  Â  Â  <!-- Escena 4: GalerÃ­a de Amor -->
Â  Â  Â  Â  <div id="love-gallery" class="scene"></div>
Â  Â  </div>

Â  Â  <!-- NavegaciÃ³n -->
Â  Â  <button class="nav-button nav-menu" onclick="toggleSceneMenu()">
Â  Â  <i class="fas fa-compass"></i>
</button>
<button class="nav-button nav-audio" onclick="toggleMusic()">
Â  Â  <i id="music-icon" class="fas fa-volume-up"></i>
</button>
<button class="nav-button nav-3d" onclick="toggle3DMode()">
Â  Â  <i class="fas fa-cube"></i>
</button>
<button class="nav-button nav-prev" onclick="previousScene()">
Â  Â  <i class="fas fa-chevron-left"></i>
</button>
<button class="nav-button nav-next" onclick="nextScene()">
Â  Â  <i class="fas fa-chevron-right"></i>
</button>

Â  Â  <!-- MenÃº de escenas -->
Â  Â  <div id="scene-menu">
Â  Â  Â  Â  <button class="scene-option" onclick="loadScene(0)">â„ï¸ JardÃ­n de Nieve</button>
Â  Â  Â  Â  <button class="scene-option" onclick="loadScene(1)">ğŸŒŒ Universo Nuestro</button>
Â  Â  Â  Â  <button class="scene-option" onclick="loadScene(2)">ğŸ¡ Hogar</button>
Â  Â  Â  Â  <button class="scene-option" onclick="loadScene(3)">ğŸ’ GalerÃ­a de Amor</button>
Â  Â  </div>

Â  Â  <!-- Indicador de escena -->
Â  Â  <div class="scene-indicator" id="scene-indicator">
Â  Â  Â  Â  â„ï¸ JardÃ­n de Nieve
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ========== CONFIGURACIÃ“N ==========
Â  Â  Â  Â  const scenes = [
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  id: 'snow-garden',Â 
Â  Â  Â  Â  Â  Â  Â  Â  name: 'â„ï¸ JardÃ­n',
Â  Â  Â  Â  Â  Â  Â  Â  music: 'https://literland.github.io/mytaekook/Snow%20Flower%20(feat.%20Peakboy).mp3'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  id: 'universe',Â 
Â  Â  Â  Â  Â  Â  Â  Â  name: 'ğŸŒŒ Nuestro Universo',
Â  Â  Â  Â  Â  Â  Â  Â  music: 'https://literland.github.io/mytaekook/Best%20Of%20Me.mp3'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  id: 'k-drama-home',Â 
Â  Â  Â  Â  Â  Â  Â  Â  name: 'ğŸ¡ Hogar',
Â  Â  Â  Â  Â  Â  Â  Â  music: 'https://literland.github.io/mytaekook/HOME.mp3'
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  {Â 
Â  Â  Â  Â  Â  Â  Â  Â  id: 'love-gallery',Â 
Â  Â  Â  Â  Â  Â  Â  Â  name: 'ğŸ’ GalerÃ­a del Alma',
Â  Â  Â  Â  Â  Â  Â  Â  music: 'https://literland.github.io/mytaekook/Confess%20To%20You.mp3'
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  ];

Â  Â  Â  Â  const photos = [
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/14d8c2703f5903579bd3d8e809f7dd39.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/17ac5a41c03f28b8ef49f4292390d48d.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/20240721_183505_lmc_8.4.NIGHT.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/20240729_204443_lmc_8.4.NIGHT.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/7b53f54291b6bc7d5fdd7abbdfe6bfd3.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/8f3e162fade4cafcc3840ab9fe9e8a83.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/IMG_20240721_182828.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/IMG_20240804_155001.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/image%20(1).jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/image.jpg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/images%20(1).jpeg',
Â  Â  Â  Â  Â  Â  'https://literland.github.io/mytaekook/images.jpeg',
            'https://literland.github.io/mytaekook/images.jpeg',
            'https://raw.githubusercontent.com/Literland/mytaekook/main/flores.png',
            'https://raw.githubusercontent.com/Literland/mytaekook/main/demanos.png',
            'https://raw.githubusercontent.com/Literland/mytaekook/main/casados.png'
Â  Â  Â  Â  ];

Â  Â  Â  Â  const messages = [
Â  Â  Â  Â  Â  Â  "ğŸ’– Eres mi todo, mi supitera",
Â  Â  Â  Â  Â  Â  "ğŸ’œ TuyYo Forever",
Â  Â  Â  Â  Â  Â  "ğŸŒ¸ Nuestro amor es eterno, bebÃ©",Â 
Â  Â  Â  Â  Â  Â  "âœ¨ Eres mi estrella favorita",
Â  Â  Â  Â  Â  Â  "ğŸ»ğŸ° soulmates forever",
Â  Â  Â  Â  Â  Â  "â„ï¸ Nieve y amor infinito",
Â  Â  Â  Â  Â  Â  "ğŸŒŸ Nuestro mikrokosmos",
Â  Â  Â  Â  Â  Â  "ğŸ’• Eres mi razÃ³n de ser",
Â  Â  Â  Â  Â  Â  "ğŸ¦‹ Vuelas en mi corazÃ³n",
Â  Â  Â  Â  Â  Â  "ğŸ¶ Nuestra canciÃ³n favorita",
Â  Â  Â  Â  Â  Â  "ğŸ¡ Nuestro hogar eres tÃº",
Â  Â  Â  Â  Â  Â  "ğŸ’˜ Te amo mÃ¡s cada dÃ­a"
Â  Â  Â  Â  ];

Â  Â  Â  Â  let currentSceneIndex = 0;
Â  Â  Â  Â  let isMusicPlaying = false;
Â  Â  Â  Â  let isExperienceStarted = false;
Â  Â  Â  Â  let currentAudio = null;
Â  Â  Â  Â  let is3DMode = false;
Â  Â  Â  Â  let mouseX = 0;
Â  Â  Â  Â  let mouseY = 0;

Â  Â  Â  Â  // ========== INICIALIZACIÃ“N ==========
Â  Â  Â  Â  function init() {
Â  Â  Â  Â  Â  Â  createSnowflakes();
Â  Â  Â  Â  Â  Â  createStars();
Â  Â  Â  Â  Â  Â  createFloatingHearts();
Â  Â  Â  Â  Â  Â  createBTSElements();
Â  Â  Â  Â  Â  Â  createSpecialMessages();
Â  Â  Â  Â  Â  Â  updateMusicIcon();
Â  Â  Â  Â  Â  Â  setupMouseTracking();
Â  Â  Â  Â  }

Â  Â  Â  Â  function startExperience() {
Â  Â  Â  Â  Â  Â  if (isExperienceStarted) return;
Â  Â  Â  Â  Â  Â  isExperienceStarted = true;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.getElementById('welcome-screen').style.display = 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('experience-container').style.display = 'block';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  loadScene(0);
Â  Â  Â  Â  }

Â  Â  Â  Â  // ========== SISTEMA DE ESCENAS MEJORADO ==========
Â  Â  Â  Â  function loadScene(index) {
Â  Â  Â  Â  Â  Â  // Efecto de transiciÃ³n
Â  Â  Â  Â  Â  Â  const transition = document.getElementById('scene-transition');
Â  Â  Â  Â  Â  Â  transition.classList.add('active');
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  currentSceneIndex = index;
Â  Â  Â  Â  Â  Â  Â  Â  const scene = scenes[index];
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.querySelectorAll('.scene').forEach(scene => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scene.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById(scene.id).classList.add('active');
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('scene-indicator').textContent = scene.name;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  loadSceneContent(scene.id);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('scene-menu').style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Reproducir mÃºsica de la escena actual
Â  Â  Â  Â  Â  Â  Â  Â  playSceneMusic(index);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Finalizar transiciÃ³n
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  transition.classList.remove('active');
Â  Â  Â  Â  Â  Â  Â  Â  }, 300);
Â  Â  Â  Â  Â  Â  }, 500);
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadSceneContent(sceneId) {
Â  Â  Â  Â  Â  Â  const scene = document.getElementById(sceneId);
Â  Â  Â  Â  Â  Â  scene.innerHTML = '';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  switch(sceneId) {
Â  Â  Â  Â  Â  Â  Â  Â  case 'snow-garden':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadSnowGarden(scene);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'universe':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadUniverse(scene);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'k-drama-home':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadKdramaHome(scene);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  Â  Â  case 'love-gallery':
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  loadLoveGallery(scene);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadSnowGarden(scene) {
Â  Â  Â  Â  Â  Â  const positions = [
Â  Â  Â  Â  Â  Â  Â  Â  { x: 25, y: 30 }, { x: 75, y: 30 },
Â  Â  Â  Â  Â  Â  Â  Â  { x: 25, y: 70 }, { x: 75, y: 70 }
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 4; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  createDraggablePhoto(scene, i, positions[i]);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "â„ï¸ Donde los sueÃ±os nacen", 50, 15);
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸ’« Y el amor florece", 50, 85);
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadUniverse(scene) {
Â  Â  Â  Â  Â  Â  for (let i = 4; i < 8; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const angle = (i - 4) * (Math.PI / 2);
Â  Â  Â  Â  Â  Â  Â  Â  createDraggablePhoto(scene, i, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x: 50 + Math.cos(angle) * 30,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  y: 50 + Math.sin(angle) * 20
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸŒŒ Universo de posibilidades", 50, 10);
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "âœ¨ Donde todo es posible", 50, 90);
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadKdramaHome(scene) {
Â  Â  Â  Â  Â  Â  const positions = [
Â  Â  Â  Â  Â  Â  Â  Â  { x: 20, y: 25 }, { x: 80, y: 25 },
Â  Â  Â  Â  Â  Â  Â  Â  { x: 20, y: 75 }, { x: 80, y: 75 }
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  for (let i = 8; i < 12; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  if (i - 8 < positions.length) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createDraggablePhoto(scene, i, positions[i - 8]);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸ¡ Nuestro dulce hogar", 50, 15);
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸ’• Donde el amor vive", 50, 85);
Â  Â  Â  Â  }

Â  Â  Â  Â  function loadLoveGallery(scene) {
Â  Â  Â  Â  Â  Â  for (let i = 0; i < photos.length; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const row = Math.floor(i / 3);
Â  Â  Â  Â  Â  Â  Â  Â  const col = i % 3;
Â  Â  Â  Â  Â  Â  Â  Â  createDraggablePhoto(scene, i, {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  x: 20 + col * 30,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  y: 20 + row * 25
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸ’ Nuestra historia de amor", 50, 10);
Â  Â  Â  Â  Â  Â  createSceneMessage(scene, "ğŸ“¸ Momentos eternos", 50, 90);
Â  Â  Â  Â  }

Â  Â  Â  Â  function createDraggablePhoto(scene, photoIndex, position) {
Â  Â  Â  Â  Â  Â  const frame = document.createElement('div');
Â  Â  Â  Â  Â  Â  frame.className = 'photo-frame';
Â  Â  Â  Â  Â  Â  frame.style.left = position.x + '%';
Â  Â  Â  Â  Â  Â  frame.style.top = position.y + '%';
Â  Â  Â  Â  Â  Â  frame.dataset.photoIndex = photoIndex;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const img = document.createElement('img');
Â  Â  Â  Â  Â  Â  img.src = photos[photoIndex];
Â  Â  Â  Â  Â  Â  img.alt = `Nuestra foto ${photoIndex + 1}`;
Â  Â  Â  Â  Â  Â  img.draggable = false;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  frame.appendChild(img);
Â  Â  Â  Â  Â  Â  scene.appendChild(frame);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setupDragAndDrop(frame);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  frame.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  Â  Â  e.stopPropagation();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Efecto de pulso
Â  Â  Â  Â  Â  Â  Â  Â  frame.classList.add('pulsing');
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => frame.classList.remove('pulsing'), 600);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Crear partÃ­culas de corazones
Â  Â  Â  Â  Â  Â  Â  Â  createHeartParticles(e.clientX, e.clientY);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  // Mostrar mensaje
Â  Â  Â  Â  Â  Â  Â  Â  showPhotoMessage(photoIndex, frame);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  function createHeartParticles(x, y) {
Â  Â  Â  Â  Â  Â  const hearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’˜'];
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 8; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const heart = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.className = 'heart-particle';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.style.left = x + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.style.top = y + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // DirecciÃ³n aleatoria
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const angle = Math.random() * Math.PI * 2;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const distance = 100 + Math.random() * 100;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const tx = Math.cos(angle) * distance;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const ty = Math.sin(angle) * distance;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.style.setProperty('--tx', tx + 'px');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heart.style.setProperty('--ty', ty + 'px');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(heart);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => heart.remove(), 1500);
Â  Â  Â  Â  Â  Â  Â  Â  }, i * 100);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // ========== SISTEMA DE ARRASTRE MEJORADO ==========
Â  Â  Â  Â  function setupDragAndDrop(element) {
Â  Â  Â  Â  Â  Â  let isDragging = false;
Â  Â  Â  Â  Â  Â  let startX, startY;
Â  Â  Â  Â  Â  Â  let initialX, initialY;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  element.addEventListener('mousedown', startDrag);
Â  Â  Â  Â  Â  Â  element.addEventListener('touchstart', startDrag, { passive: false });
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function startDrag(e) {
Â  Â  Â  Â  Â  Â  Â  Â  isDragging = true;
Â  Â  Â  Â  Â  Â  Â  Â  element.classList.add('dragging');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const rect = element.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â  initialX = rect.left;
Â  Â  Â  Â  Â  Â  Â  Â  initialY = rect.top;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (e.type === 'mousedown') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startX = e.clientX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startY = e.clientY;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startX = e.touches[0].clientX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  startY = e.touches[0].clientY;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('mousemove', drag);
Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('touchmove', drag, { passive: false });
Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('mouseup', stopDrag);
Â  Â  Â  Â  Â  Â  Â  Â  document.addEventListener('touchend', stopDrag);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function drag(e) {
Â  Â  Â  Â  Â  Â  Â  Â  if (!isDragging) return;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  let currentX, currentY;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  if (e.type === 'mousemove') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentX = e.clientX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentY = e.clientY;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentX = e.touches[0].clientX;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentY = e.touches[0].clientY;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const deltaX = currentX - startX;
Â  Â  Â  Â  Â  Â  Â  Â  const deltaY = currentY - startY;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  element.style.left = (initialX + deltaX) + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.top = (initialY + deltaY) + 'px';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  function stopDrag() {
Â  Â  Â  Â  Â  Â  Â  Â  if (!isDragging) return;
Â  Â  Â  Â  Â  Â  Â  Â  isDragging = false;
Â  Â  Â  Â  Â  Â  Â  Â  element.classList.remove('dragging');
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const rect = element.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â  const scene = element.parentElement;
Â  Â  Â  Â  Â  Â  Â  Â  const sceneRect = scene.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const percentX = ((rect.left + rect.width/2 - sceneRect.left) / sceneRect.width) * 100;
Â  Â  Â  Â  Â  Â  Â  Â  const percentY = ((rect.top + rect.height/2 - sceneRect.top) / sceneRect.height) * 100;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  element.style.left = Math.max(5, Math.min(95, percentX)) + '%';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.top = Math.max(5, Math.min(95, percentY)) + '%';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.transform = 'translate(-50%, -50%)';
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  document.removeEventListener('mousemove', drag);
Â  Â  Â  Â  Â  Â  Â  Â  document.removeEventListener('touchmove', drag);
Â  Â  Â  Â  Â  Â  Â  Â  document.removeEventListener('mouseup', stopDrag);
Â  Â  Â  Â  Â  Â  Â  Â  document.removeEventListener('touchend', stopDrag);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createSceneMessage(scene, text, x, y) {
Â  Â  Â  Â  Â  Â  const message = document.createElement('div');
Â  Â  Â  Â  Â  Â  message.className = 'special-message';
Â  Â  Â  Â  Â  Â  message.textContent = text;
Â  Â  Â  Â  Â  Â  message.style.left = x + '%';
Â  Â  Â  Â  Â  Â  message.style.top = y + '%';
Â  Â  Â  Â  Â  Â  scene.appendChild(message);
Â  Â  Â  Â  }

Â  Â  Â  Â  function showPhotoMessage(photoIndex, element) {
Â  Â  Â  Â  Â  Â  const message = document.createElement('div');
Â  Â  Â  Â  Â  Â  message.className = 'special-message';
Â  Â  Â  Â  Â  Â  message.textContent = messages[photoIndex];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const rect = element.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  message.style.left = (rect.left + rect.width/2) + 'px';
Â  Â  Â  Â  Â  Â  message.style.top = (rect.top - 40) + 'px';
Â  Â  Â  Â  Â  Â  message.style.transform = 'translateX(-50%)';
Â  Â  Â  Â  Â  Â  message.style.animation = 'message-float 3s ease-in-out';
Â  Â  Â  Â  Â  Â  message.style.fontSize = '1.5rem';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.body.appendChild(message);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  message.style.opacity = '0';
Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => message.remove(), 1000);
Â  Â  Â  Â  Â  Â  }, 2500);
Â  Â  Â  Â  }

Â  Â  Â  Â  function nextScene() {
Â  Â  Â  Â  Â  Â  if (!isExperienceStarted) return;
Â  Â  Â  Â  Â  Â  const nextIndex = (currentSceneIndex + 1) % scenes.length;
Â  Â  Â  Â  Â  Â  loadScene(nextIndex);
Â  Â  Â  Â  }

Â  Â  Â  Â  function previousScene() {
Â  Â  Â  Â  Â  Â  if (!isExperienceStarted) return;
Â  Â  Â  Â  Â  Â  const prevIndex = (currentSceneIndex - 1 + scenes.length) % scenes.length;
Â  Â  Â  Â  Â  Â  loadScene(prevIndex);
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleSceneMenu() {
Â  Â  Â  Â  Â  Â  const menu = document.getElementById('scene-menu');
Â  Â  Â  Â  Â  Â  menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
Â  Â  Â  Â  }

Â  Â  Â  Â  // ========== SISTEMA DE MÃšSICA ==========
Â  Â  Â  Â  function playSceneMusic(sceneIndex) {
Â  Â  Â  Â  Â  Â  // Detener mÃºsica actual si existe
Â  Â  Â  Â  Â  Â  if (currentAudio) {
Â  Â  Â  Â  Â  Â  Â  Â  currentAudio.pause();
Â  Â  Â  Â  Â  Â  Â  Â  currentAudio = null;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const scene = scenes[sceneIndex];
Â  Â  Â  Â  Â  Â  if (!scene.music) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Crear nuevo elemento de audio para esta escena
Â  Â  Â  Â  Â  Â  currentAudio = new Audio(scene.music);
Â  Â  Â  Â  Â  Â  currentAudio.volume = 0.5;
Â  Â  Â  Â  Â  Â  currentAudio.loop = true;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const playPromise = currentAudio.play();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (playPromise !== undefined) {
Â  Â  Â  Â  Â  Â  Â  Â  playPromise.then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isMusicPlaying = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMusicIcon();
Â  Â  Â  Â  Â  Â  Â  Â  }).catch(error => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  console.log('La reproducciÃ³n automÃ¡tica fue bloqueada');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createMusicActivationButton(sceneIndex);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createMusicActivationButton(sceneIndex) {
Â  Â  Â  Â  Â  Â  if (document.getElementById('music-activation-btn')) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const scene = scenes[sceneIndex];
Â  Â  Â  Â  Â  Â  const btn = document.createElement('button');
Â  Â  Â  Â  Â  Â  btn.id = 'music-activation-btn';
Â  Â  Â  Â  Â  Â  btn.innerHTML = `ğŸµ Activar MÃºsica: ${scene.name}`;
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  document.body.appendChild(btn);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  btn.onclick = function() {
Â  Â  Â  Â  Â  Â  Â  Â  if (currentAudio) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  currentAudio.play().then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isMusicPlaying = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateMusicIcon();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.style.transform = 'translateX(-50%) scale(0.9)';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  setTimeout(() => btn.remove(), 300);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  btn.innerHTML = 'âŒ Error - Click para intentar';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  Â  if (btn.parentNode) btn.remove();
Â  Â  Â  Â  Â  Â  }, 10000);
Â  Â  Â  Â  }

Â  Â  Â  Â  function toggleMusic() {
Â  Â  Â  Â  Â  Â  if (!currentAudio) return;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (isMusicPlaying) {
Â  Â  Â  Â  Â  Â  Â  Â  currentAudio.pause();
Â  Â  Â  Â  Â  Â  Â  Â  isMusicPlaying = false;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  currentAudio.play().then(() => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isMusicPlaying = true;
Â  Â  Â  Â  Â  Â  Â  Â  }).catch(error => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  createMusicActivationButton(currentSceneIndex);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  updateMusicIcon();
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateMusicIcon() {
Â  Â  Â  Â  Â  Â  const icon = document.getElementById('music-icon');
Â  Â  Â  Â  Â  Â  if (icon) {
Â  Â  Â  Â  Â  Â  Â  Â  icon.className = isMusicPlaying ? 'fas fa-volume-up' : 'fas fa-volume-mute';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  // ========== EFECTOS VISUALES ==========
Â  Â  Â  Â  function createSnowflakes() {
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 60; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const snowflake = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.className = 'snowflake';
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.width = Math.random() * 5 + 3 + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.height = snowflake.style.width;
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.animationDuration = Math.random() * 6 + 4 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.animationDelay = Math.random() * 10 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  snowflake.style.opacity = Math.random() * 0.6 + 0.3;
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(snowflake);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createStars() {
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 80; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const star = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  star.className = 'star';
Â  Â  Â  Â  Â  Â  Â  Â  star.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  Â  Â  star.style.top = Math.random() * 100 + 'vh';
Â  Â  Â  Â  Â  Â  Â  Â  star.style.width = Math.random() * 3 + 1 + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  star.style.height = star.style.width;
Â  Â  Â  Â  Â  Â  Â  Â  star.style.animationDelay = Math.random() * 8 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  star.style.opacity = Math.random() * 0.5 + 0.2;
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(star);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createFloatingHearts() {
Â  Â  Â  Â  Â  Â  const hearts = ['ğŸ’–', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’˜', 'ğŸ’'];
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 20; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const heart = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  heart.className = 'floating-heart';
Â  Â  Â  Â  Â  Â  Â  Â  heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
Â  Â  Â  Â  Â  Â  Â  Â  heart.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  Â  Â  heart.style.top = Math.random() * 100 + 'vh';
Â  Â  Â  Â  Â  Â  Â  Â  heart.style.animationDelay = Math.random() * 15 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  heart.style.fontSize = (Math.random() * 1.5 + 2) + 'rem';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(heart);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createBTSElements() {
Â  Â  Â  Â  Â  Â  const btsSymbols = ['ğŸ’œ', 'ğŸ»', 'ğŸ°', 'ğŸŒŸ', 'âœ¨', 'ğŸŒ™', 'â­'];
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 15; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const element = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  element.className = 'bts-element';
Â  Â  Â  Â  Â  Â  Â  Â  element.textContent = btsSymbols[Math.floor(Math.random() * btsSymbols.length)];
Â  Â  Â  Â  Â  Â  Â  Â  element.style.left = Math.random() * 100 + 'vw';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.top = Math.random() * 100 + 'vh';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.animationDelay = Math.random() * 20 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  element.style.fontSize = (Math.random() * 1.5 + 2.2) + 'rem';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(element);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function createSpecialMessages() {
Â  Â  Â  Â  Â  Â  const specialTexts = [
Â  Â  Â  Â  Â  Â  Â  Â  "TE AMO MI NALGONA", "FOREVER",Â 
Â  Â  Â  Â  Â  Â  Â  Â  "MY SUPITERA", "NUESTRO AMOR", "PARA SIEMPRE ğŸ’œ",Â 
Â  Â  Â  Â  Â  Â  Â  Â  "TAE ğŸ»", "KOOK ğŸ°"
Â  Â  Â  Â  Â  Â  ];
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  for (let i = 0; i < 12; i++) {
Â  Â  Â  Â  Â  Â  Â  Â  const message = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  message.className = 'special-message';
Â  Â  Â  Â  Â  Â  Â  Â  message.textContent = specialTexts[Math.floor(Math.random() * specialTexts.length)];
Â  Â  Â  Â  Â  Â  Â  Â  message.style.left = Math.random() * 80 + 10 + '%';
Â  Â  Â  Â  Â  Â  Â  Â  message.style.top = Math.random() * 80 + 10 + '%';
Â  Â  Â  Â  Â  Â  Â  Â  message.style.animationDelay = Math.random() * 20 + 's';
Â  Â  Â  Â  Â  Â  Â  Â  message.style.fontSize = (Math.random() * 1 + 1.5) + 'rem';
Â  Â  Â  Â  Â  Â  Â  Â  document.body.appendChild(message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

// ========== SISTEMA 3D INMERSIVO ==========
function toggle3DMode() {
Â  Â  is3DMode = !is3DMode;
Â  Â  const currentScene = document.getElementById(scenes[currentSceneIndex].id);
Â  Â Â 
Â  Â  if (is3DMode) {
Â  Â  Â  Â  // Activar modo 3D
Â  Â  Â  Â  currentScene.classList.add('scene-3d', 'scene-3d-active');
Â  Â  Â  Â  create3DEnvironment(currentScene);
Â  Â  Â  Â  startParallaxEffect();
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Actualizar botÃ³n
Â  Â  Â  Â  const btn3D = document.querySelector('.nav-3d');
Â  Â  Â  Â  btn3D.innerHTML = '<i class="fas fa-cube" style="color: #ff6b9d;"></i>';
Â  Â  Â  Â  btn3D.style.background = 'rgba(255, 107, 157, 0.6)';
Â  Â  Â  Â Â 
Â  Â  } else {
Â  Â  Â  Â  // Desactivar modo 3D
Â  Â  Â  Â  currentScene.classList.remove('scene-3d', 'scene-3d-active');
Â  Â  Â  Â  remove3DEnvironment(currentScene);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Restaurar botÃ³n
Â  Â  Â  Â  const btn3D = document.querySelector('.nav-3d');
Â  Â  Â  Â  btn3D.innerHTML = '<i class="fas fa-cube"></i>';
Â  Â  Â  Â  btn3D.style.background = 'rgba(165, 212, 233, 0.4)';
Â  Â  }
}

function create3DEnvironment(scene) {
Â  Â  // Limpiar escena primero
Â  Â  scene.innerHTML = '';
Â  Â Â 
Â  Â  // Crear contenedor parallax
Â  Â  const parallaxContainer = document.createElement('div');
Â  Â  parallaxContainer.className = 'parallax-container';
Â  Â  parallaxContainer.id = 'parallax-container';
Â  Â Â 
Â  Â  // Crear capas de profundidad
Â  Â  for (let i = 1; i <= 5; i++) {
Â  Â  Â  Â  const layer = document.createElement('div');
Â  Â  Â  Â  layer.className = `parallax-layer layer-${i}`;
Â  Â  Â  Â  layer.id = `layer-${i}`;
Â  Â  Â  Â  parallaxContainer.appendChild(layer);
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Agregar partÃ­culas a cada capa
Â  Â  Â  Â  createParticlesForLayer(layer, i);
Â  Â  }
Â  Â Â 
Â  Â  // Agregar gradiente de fondo
Â  Â  const bgGradient = document.createElement('div');
Â  Â  bgGradient.className = 'bg-gradient-3d';
Â  Â  parallaxContainer.appendChild(bgGradient);
Â  Â Â 
Â  Â  scene.appendChild(parallaxContainer);
Â  Â Â 
Â  Â  // Crear fotos en 3D
Â  Â  create3DPhotos(scene);
Â  Â Â 
Â  Â  // Crear elementos decorativos 3D
Â  Â  create3DFloatingElements(scene);
}

function createParticlesForLayer(layer, layerIndex) {
Â  Â  const particleCount = layerIndex * 8;
Â  Â  const particleTypes = ['heart', 'star', 'bubble'];
Â  Â  const colors = ['#FFB7C5', '#FFD1DC', '#D8BFD8', '#E6E6FA', '#B5EAD7', '#A7FFEB', '#87CEEB', '#FFF9C4'];
Â  Â Â 
Â  Â  for (let i = 0; i < particleCount; i++) {
Â  Â  Â  Â  const particle = document.createElement('div');
Â  Â  Â  Â  const type = particleTypes[Math.floor(Math.random() * particleTypes.length)];
Â  Â  Â  Â Â 
Â  Â  Â  Â  particle.className = `particle-3d particle-${type}`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  switch(type) {
Â  Â  Â  Â  Â  Â  case 'heart':
Â  Â  Â  Â  Â  Â  Â  Â  particle.innerHTML = 'ğŸ’–';
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.color = colors[Math.floor(Math.random() * colors.length)];
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.fontSize = (Math.random() * 1.5 + 1) + 'rem';
Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  case 'star':
Â  Â  Â  Â  Â  Â  Â  Â  const size = Math.random() * 8 + 3;
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.width = size + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.height = size + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.background = colors[Math.floor(Math.random() * colors.length)];
Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  Â  Â  case 'bubble':
Â  Â  Â  Â  Â  Â  Â  Â  const bubbleSize = Math.random() * 20 + 10;
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.width = bubbleSize + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.height = bubbleSize + 'px';
Â  Â  Â  Â  Â  Â  Â  Â  particle.style.background = `radial-gradient(circle at 30% 30%, ${colors[Math.floor(Math.random() * colors.length)]}, transparent)`;
Â  Â  Â  Â  Â  Â  Â  Â  break;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const startX = Math.random() * 120 - 10 + '%';
Â  Â  Â  Â  const startY = Math.random() * 120 - 10 + '%';
Â  Â  Â  Â  const endX = (Math.random() - 0.5) * 200 + '%';
Â  Â  Â  Â  const endY = (Math.random() - 0.5) * 200 + '%';
Â  Â  Â  Â  const startZ = -500 + (layerIndex * 100);
Â  Â  Â  Â  const endZ = 500 - (layerIndex * 100);
Â  Â  Â  Â Â 
Â  Â  Â  Â  particle.style.setProperty('--start-x', startX);
Â  Â  Â  Â  particle.style.setProperty('--start-y', startY);
Â  Â  Â  Â  particle.style.setProperty('--start-z', startZ + 'px');
Â  Â  Â  Â  particle.style.setProperty('--end-x', endX);
Â  Â  Â  Â  particle.style.setProperty('--end-y', endY);
Â  Â  Â  Â  particle.style.setProperty('--end-z', endZ + 'px');
Â  Â  Â  Â  particle.style.setProperty('--opacity', Math.random() * 0.7 + 0.3);
Â  Â  Â  Â Â 
Â  Â  Â  Â  const duration = 15 + Math.random() * 20;
Â  Â  Â  Â  const delay = Math.random() * 10;
Â  Â  Â  Â  particle.style.animationDuration = duration + 's';
Â  Â  Â  Â  particle.style.animationDelay = delay + 's';
Â  Â  Â  Â Â 
Â  Â  Â  Â  layer.appendChild(particle);
Â  Â  }
}

function create3DPhotos(scene) {
Â  Â  const positions = [
Â  Â  Â  Â  { x: 25, y: 30, z: 50 }, { x: 75, y: 30, z: -30 },
Â  Â  Â  Â  { x: 25, y: 70, z: -20 }, { x: 75, y: 70, z: 40 },
Â  Â  Â  Â  { x: 50, y: 50, z: 0 }, { x: 30, y: 50, z: 25 },
Â  Â  Â  Â  { x: 70, y: 50, z: -25 }, { x: 50, y: 20, z: 15 }
Â  Â  ];
Â  Â Â 
Â  Â  for (let i = 0; i < Math.min(photos.length, 8); i++) {
Â  Â  Â  Â  const frame = document.createElement('div');
Â  Â  Â  Â  frame.className = 'photo-frame-3d';
Â  Â  Â  Â  frame.style.left = positions[i].x + '%';
Â  Â  Â  Â  frame.style.top = positions[i].y + '%';
Â  Â  Â  Â  frame.style.transform = `translateZ(${positions[i].z}px) rotateY(${Math.random() * 20 - 10}deg) rotateX(${Math.random() * 10 - 5}deg)`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const img = document.createElement('img');
Â  Â  Â  Â  img.src = photos[i];
Â  Â  Â  Â  img.alt = `Nuestra foto ${i + 1}`;
Â  Â  Â  Â  img.draggable = false;
Â  Â  Â  Â Â 
Â  Â  Â  Â  frame.appendChild(img);
Â  Â  Â  Â  parallaxContainer.appendChild(frame);
Â  Â  Â  Â Â 
Â  Â  Â  Â  setup3DDragAndDrop(frame);
Â  Â  }
}

function setup3DDragAndDrop(element) {
Â  Â  let isDragging = false;
Â  Â  let startX, startY;
Â  Â  let initialX, initialY;
Â  Â Â 
Â  Â  element.addEventListener('mousedown', startDrag);
Â  Â  element.addEventListener('touchstart', startDrag, { passive: false });
Â  Â Â 
Â  Â  function startDrag(e) {
Â  Â  Â  Â  isDragging = true;
Â  Â  Â  Â  element.classList.add('dragging');
Â  Â  Â  Â Â 
Â  Â  Â  Â  const rect = element.getBoundingClientRect();
Â  Â  Â  Â  initialX = parseFloat(element.style.left);
Â  Â  Â  Â  initialY = parseFloat(element.style.top);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (e.type === 'mousedown') {
Â  Â  Â  Â  Â  Â  startX = e.clientX;
Â  Â  Â  Â  Â  Â  startY = e.clientY;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  startX = e.touches[0].clientX;
Â  Â  Â  Â  Â  Â  startY = e.touches[0].clientY;
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.addEventListener('mousemove', drag);
Â  Â  Â  Â  document.addEventListener('touchmove', drag, { passive: false });
Â  Â  Â  Â  document.addEventListener('mouseup', stopDrag);
Â  Â  Â  Â  document.addEventListener('touchend', stopDrag);
Â  Â  }
Â  Â Â 
Â  Â  function drag(e) {
Â  Â  Â  Â  if (!isDragging) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  let currentX, currentY;
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (e.type === 'mousemove') {
Â  Â  Â  Â  Â  Â  currentX = e.clientX;
Â  Â  Â  Â  Â  Â  currentY = e.clientY;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  currentX = e.touches[0].clientX;
Â  Â  Â  Â  Â  Â  currentY = e.touches[0].clientY;
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const deltaX = currentX - startX;
Â  Â  Â  Â  const deltaY = currentY - startY;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const newX = initialX + (deltaX / window.innerWidth) * 100;
Â  Â  Â  Â  const newY = initialY + (deltaY / window.innerHeight) * 100;
Â  Â  Â  Â Â 
Â  Â  Â  Â  element.style.left = Math.max(5, Math.min(95, newX)) + '%';
Â  Â  Â  Â  element.style.top = Math.max(5, Math.min(95, newY)) + '%';
Â  Â  }
Â  Â Â 
Â  Â  function stopDrag() {
Â  Â  Â  Â  if (!isDragging) return;
Â  Â  Â  Â  isDragging = false;
Â  Â  Â  Â  element.classList.remove('dragging');
Â  Â  Â  Â Â 
Â  Â  Â  Â  document.removeEventListener('mousemove', drag);
Â  Â  Â  Â  document.removeEventListener('touchmove', drag);
Â  Â  Â  Â  document.removeEventListener('mouseup', stopDrag);
Â  Â  Â  Â  document.removeEventListener('touchend', stopDrag);
Â  Â  }
}

Â  Â  Â  Â  function create3DFloatingElements(scene) {
Â  Â  const elements = ['ğŸ’–', 'ğŸ’•', 'ğŸ’', 'âœ¨', 'ğŸŒŸ', 'ğŸ¦‹', 'ğŸŒ¸', 'ğŸ€'];
Â  Â  const container = scene.querySelector('.parallax-container');
Â  Â Â 
Â  Â  for (let i = 0; i < 12; i++) {
Â  Â  Â  Â  const element = document.createElement('div');
Â  Â  Â  Â  element.className = 'floating-element-3d';
Â  Â  Â  Â  element.innerHTML = elements[Math.floor(Math.random() * elements.length)];
Â  Â  Â  Â  element.style.left = Math.random() * 100 + '%';
Â  Â  Â  Â  element.style.top = Math.random() * 100 + '%';
Â  Â  Â  Â  element.style.color = ['#FFB7C5', '#D8BFD8', '#B5EAD7', '#87CEEB'][Math.floor(Math.random() * 4)];
Â  Â  Â  Â  element.style.fontSize = (Math.random() * 2 + 2) + 'rem';
Â  Â  Â  Â  element.style.animationDelay = Math.random() * 10 + 's';
Â  Â  Â  Â Â 
Â  Â  Â  Â  container.appendChild(element);
Â  Â  }
}
Â  Â  Â  Â Â 
function setupMouseTracking() {
Â  Â  document.addEventListener('mousemove', (e) => {
Â  Â  Â  Â  mouseX = e.clientX;
Â  Â  Â  Â  mouseY = e.clientY;
Â  Â  });
Â  Â Â 
Â  Â  document.addEventListener('touchmove', (e) => {
Â  Â  Â  Â  if (e.touches[0]) {
Â  Â  Â  Â  Â  Â  mouseX = e.touches[0].clientX;
Â  Â  Â  Â  Â  Â  mouseY = e.touches[0].clientY;
Â  Â  Â  Â  }
Â  Â  });
}

function startParallaxEffect() {
Â  Â  function updateParallax() {
Â  Â  Â  Â  if (!is3DMode) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const container = document.getElementById('parallax-container');
Â  Â  Â  Â  if (!container) return;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const moveX = (mouseX / window.innerWidth - 0.5) * 50;
Â  Â  Â  Â  const moveY = (mouseY / window.innerHeight - 0.5) * 50;
Â  Â  Â  Â Â 
Â  Â  Â  Â  for (let i = 1; i <= 5; i++) {
Â  Â  Â  Â  Â  Â  const layer = document.getElementById(`layer-${i}`);
Â  Â  Â  Â  Â  Â  if (layer) {
Â  Â  Â  Â  Â  Â  Â  Â  const depth = i * 0.2;
Â  Â  Â  Â  Â  Â  Â  Â  layer.style.transform = `translate3d(${moveX * depth}px, ${moveY * depth}px, 0)`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  requestAnimationFrame(updateParallax);
Â  Â  }
Â  Â Â 
Â  Â  updateParallax();
}

function remove3DEnvironment(scene) {
Â  Â  scene.innerHTML = '';
Â  Â  // Esto recargarÃ¡ el contenido normal de la escena
Â  Â  loadSceneContent(scenes[currentSceneIndex].id);
}
Â  Â  Â  Â Â 
        // ========== INICIAR ==========
        window.addEventListener('load', init);
    </script type="text/plain" data-migrated="true">
    <script src="assets/app.js" defer></script>
</body>
</html>
