<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Para Mi Amor - ALEJ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #000000;
            color: #FFF;
            font-family: 'Mali', cursive;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* Canvas 3D */
        #three-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Contenedores */
        .container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
            padding: 20px;
        }

        /* Pantalla inicial */
        #click-overlay {
            background: rgba(0, 0, 0, 0.8);
            cursor: pointer;
            transition: all 0.5s ease;
        }

        #click-overlay h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            color: #ff85b3;
            margin-bottom: 20px;
            animation: pulse 2s infinite ease-in-out;
            text-shadow: 0 0 20px #ff6ba1;
        }

        #click-overlay p {
            font-size: clamp(1rem, 4vw, 1.5rem);
            color: #f8b7d8;
            margin: 10px 0;
        }

        /* Mensaje principal */
        #message-content {
            display: none;
        }

        .message {
            font-size: clamp(2.5rem, 10vw, 6rem);
            font-weight: 700;
            color: #ff9ec5;
            text-shadow: 
                0 0 20px #ff6ba1,
                0 0 40px #ff85b3,
                0 0 60px #ff9ec5;
            animation: 
                glow 3s ease-in-out infinite alternate,
                float 6s ease-in-out infinite;
            line-height: 1.2;
            text-align: center;
            white-space: pre-wrap;
        }

        /* Bot贸n de audio */
        .btn-audio-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: rgba(255, 158, 197, 0.3);
            border: 2px solid #ff9ec5;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            color: #fff;
            font-size: 1.5rem;
            display: none;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 20px rgba(255, 158, 197, 0.5);
        }

        .btn-audio-toggle:hover {
            transform: scale(1.1);
            background: rgba(255, 158, 197, 0.5);
        }

        /* Efecto de palabras al hacer click */
        .click-word {
            position: absolute;
            font-size: 2rem;
            font-weight: bold;
            color: #ff9ec5;
            pointer-events: none;
            z-index: 5;
            animation: wordFloat 4s ease-out forwards;
            text-shadow: 0 0 10px rgba(255, 158, 197, 0.7);
            font-family: 'Mali', cursive;
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff9ec5;
            font-size: 1.5rem;
            z-index: 20;
            display: none;
        }

        /* Animaciones */
        @keyframes glow {
            0%, 100% {
                text-shadow: 
                    0 0 20px #ff6ba1,
                    0 0 40px #ff85b3,
                    0 0 60px #ff9ec5;
            }
            50% {
                text-shadow: 
                    0 0 30px #ff6ba1,
                    0 0 60px #ff85b3,
                    0 0 90px #ff9ec5;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        @keyframes wordFloat {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0.3) rotate(-15deg);
            }
            20% {
                opacity: 1;
                transform: translateY(-30px) scale(1.2) rotate(5deg);
            }
            80% {
                opacity: 0.8;
                transform: translateY(-100px) scale(1) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-150px) scale(0.8) rotate(10deg);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .btn-audio-toggle {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
                top: 15px;
                right: 15px;
            }
            
            .message {
                font-size: clamp(2rem, 9vw, 4rem);
            }

            .click-word {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Canvas para Three.js -->
    <canvas id="three-canvas"></canvas>

    <!-- Audio -->
    <audio id="myAudio" loop>
        <source src="https://a128-z3.zmdcdn.me/d5e48d317636af55834b87b0fd9fd5fe?authen=exp=1762399955~acl=/d5e48d317636af55834b87b0fd9fd5fe*~hmac=537e951475297463e4a86ebf0646086e" type="audio/mpeg">
    </audio>

    <!-- Loading -->
    <div class="loading" id="loading">
        <i class="fas fa-heart fa-beat" style="color: #ff6ba1;"></i> Preparando nuestro mundo de amor...
    </div>

    <!-- Bot贸n de audio -->
    <button id="toggle-audio" class="btn-audio-toggle">
        <i id="audio-icon" class="fas fa-volume-high"></i>
    </button>

    <!-- Pantalla inicial -->
    <div class="container" id="click-overlay">
        <div>
            <h1> Nuestro Universo de Amor </h1>
            <p>Toca para entrar a nuestro mundo especial</p>
            <p style="font-size: 1.2rem; margin-top: 30px;">
                Para ti, mi ALEJ, con todo mi coraz贸n 
            </p>
        </div>
    </div>

    <!-- Mensaje principal -->
    <div class="container" id="message-content">
        <div class="message">I LOVE YOU SO MUCH\nMY ALEJ</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // ========== CONFIGURACIN ==========
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Elementos DOM
        const overlay = document.getElementById('click-overlay');
        const messageContent = document.getElementById('message-content');
        const audio = document.getElementById('myAudio');
        const toggleAudioBtn = document.getElementById('toggle-audio');
        const audioIcon = document.getElementById('audio-icon');
        const loading = document.getElementById('loading');

        // Variables globales
        let isPlaying = false;
        let isInitialized = false;
        let scene, camera, renderer, raycaster, mouse;
        let hearts3D = [], floatingTexts = [], particles = [];
        let mouseX = 0, mouseY = 0;
        let windowHalfX = window.innerWidth / 2;
        let windowHalfY = window.innerHeight / 2;

        // Palabras para el efecto de click
        const clickWords = [
            "TE AMO", "I LOVE YOU", "MI AMOR", "FOREVER", "SIEMPRE",
            "MY HEART", "BESOS", "ABRAZOS", "ERES MA", "MI TODO",
            "SOULMATE", "DESTINO", "PASIN", "ROMANCE", "ETERNIDAD"
        ];

        // Colores pastel
        const pastelColors = [
            '#FFB6C1', '#FFD1DC', '#FF9EC5', '#F8C8DC', '#F4A6B8',
            '#FF85B3', '#FF6BA1', '#FFB7C5', '#FFCCD5', '#FFDFE3'
        ];

        // ========== INICIALIZACIN ==========
        function init() {
            if (isInitialized) return;
            isInitialized = true;

            loading.style.display = 'block';
            
            initThreeJS();
            playAudio();
        }

        function playAudio() {
            audio.play().then(() => {
                completeInitialization();
            }).catch(error => {
                console.log('Audio requiere interacci贸n');
                completeInitialization();
            });
        }

        function completeInitialization() {
            loading.style.display = 'none';
            overlay.style.display = 'none';
            messageContent.style.display = 'flex';
            toggleAudioBtn.style.display = 'block';
            isPlaying = true;
            
            startTypewriter();
        }

        // ========== EFECTO DE PALABRAS AL CLICK ==========
        function createClickWord(x, y) {
            const word = document.createElement('div');
            word.className = 'click-word';
            word.textContent = clickWords[Math.floor(Math.random() * clickWords.length)];
            word.style.left = x + 'px';
            word.style.top = y + 'px';
            word.style.color = pastelColors[Math.floor(Math.random() * pastelColors.length)];
            
            document.body.appendChild(word);
            
            setTimeout(() => {
                if (word.parentNode) {
                    word.parentNode.removeChild(word);
                }
            }, 4000);
        }

        // Eventos de click/touch para palabras
        document.addEventListener('click', (e) => {
            if (isInitialized) {
                createClickWord(e.clientX, e.clientY);
            }
        });

        document.addEventListener('touchstart', (e) => {
            if (isInitialized && e.touches.length === 1) {
                createClickWord(e.touches[0].clientX, e.touches[0].clientY);
            }
        }, { passive: true });

        // ========== THREE.JS - EFECTO 3D INMERSIVO MEJORADO ==========
        function initThreeJS() {
            // Escena con niebla para profundidad
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            scene.fog = new THREE.Fog(0x000000, 50, 500);

            // C谩mara con controles m谩s sensibles
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
            camera.position.set(0, 0, 100);

            // Renderer
            renderer = new THREE.WebGLRenderer({ 
                canvas: document.getElementById('three-canvas'),
                alpha: true,
                antialias: true
            });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(2, window.devicePixelRatio));

            // Sistema de luces mejorado
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);

            const directionalLight1 = new THREE.DirectionalLight(0xff9ec5, 0.8);
            directionalLight1.position.set(10, 10, 10);
            scene.add(directionalLight1);

            const directionalLight2 = new THREE.DirectionalLight(0x85b3ff, 0.6);
            directionalLight2.position.set(-10, -10, 5);
            scene.add(directionalLight2);

            const pointLight = new THREE.PointLight(0xff6ba1, 1, 200);
            pointLight.position.set(0, 0, 50);
            scene.add(pointLight);

            // Raycaster para interacci贸n
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();

            // Crear elementos 3D
            createHearts3D();
            createFloatingTexts3D();
            createParticleField();

            // Eventos de movimiento mejorados
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('touchmove', onTouchMove, { passive: true });
            document.addEventListener('click', onDocumentClick);

            // Animaci贸n
            animateThreeJS();

            // Resize
            window.addEventListener('resize', onWindowResize);
        }

        function createHearts3D() {
            const heartShape = new THREE.Shape();
            heartShape.moveTo(0, 0);
            for (let i = 0; i < 30; i++) {
                const t = i / 30 * Math.PI * 2;
                const px = 16 * Math.pow(Math.sin(t), 3);
                const py = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
                if (i === 0) {
                    heartShape.moveTo(px, py);
                } else {
                    heartShape.lineTo(px, py);
                }
            }

            const extrudeSettings = {
                depth: 1,
                bevelEnabled: true,
                bevelThickness: 0.2,
                bevelSize: 0.1,
                bevelSegments: 8
            };

            // Crear 30 corazones en posiciones esf茅ricas
            for (let i = 0; i < 30; i++) {
                const geometry = new THREE.ExtrudeGeometry(heartShape, extrudeSettings);
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(pastelColors[Math.floor(Math.random() * pastelColors.length)]),
                    transparent: true,
                    opacity: 0.9,
                    shininess: 100,
                    specular: 0xffffff
                });

                const heart = new THREE.Mesh(geometry, material);
                
                // Distribuci贸n en esfera
                const radius = 60 + Math.random() * 100;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                
                heart.position.x = radius * Math.sin(phi) * Math.cos(theta);
                heart.position.y = radius * Math.sin(phi) * Math.sin(theta);
                heart.position.z = radius * Math.cos(phi);
                
                heart.rotation.x = Math.random() * Math.PI;
                heart.rotation.y = Math.random() * Math.PI;
                heart.rotation.z = Math.random() * Math.PI;
                
                heart.userData = {
                    originalPosition: heart.position.clone(),
                    speed: Math.random() * 0.01 + 0.005,
                    angle: Math.random() * Math.PI * 2,
                    pulseSpeed: Math.random() * 0.02 + 0.01
                };

                scene.add(heart);
                hearts3D.push(heart);
            }
        }

        function createFloatingTexts3D() {
            const words3D = [
                "TE", "AMO", "LOVE", "YOU", "FOREVER", "ALWAYS",
                "MI", "AMOR", "SOUL", "MATE", "DESTINY", "ROMANCE",
                "PASSION", "DEVOTION", "AFFECTION", "ETERNITY"
            ];

            // Usar esferas como placeholders para textos
            words3D.forEach((word, index) => {
                const geometry = new THREE.SphereGeometry(1.5, 12, 8);
                const material = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(pastelColors[index % pastelColors.length]),
                    transparent: true,
                    opacity: 0.8,
                    emissive: new THREE.Color(pastelColors[index % pastelColors.length]),
                    emissiveIntensity: 0.3
                });

                const textMesh = new THREE.Mesh(geometry, material);
                
                const radius = 80 + Math.random() * 120;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                
                textMesh.position.x = radius * Math.sin(phi) * Math.cos(theta);
                textMesh.position.y = radius * Math.sin(phi) * Math.sin(theta);
                textMesh.position.z = radius * Math.cos(phi);
                
                textMesh.userData = {
                    originalPosition: textMesh.position.clone(),
                    speed: Math.random() * 0.008 + 0.003,
                    angle: Math.random() * Math.PI * 2,
                    word: word
                };

                scene.add(textMesh);
                floatingTexts.push(textMesh);
            });
        }

        function createParticleField() {
            const particleCount = 1000;
            const positions = new Float32Array(particleCount * 3);
            const colors = new Float32Array(particleCount * 3);

            for (let i = 0; i < particleCount * 3; i += 3) {
                positions[i] = (Math.random() - 0.5) * 1000;
                positions[i + 1] = (Math.random() - 0.5) * 1000;
                positions[i + 2] = (Math.random() - 0.5) * 1000;

                const color = new THREE.Color(pastelColors[Math.floor(Math.random() * pastelColors.length)]);
                colors[i] = color.r * 0.3;
                colors[i + 1] = color.g * 0.3;
                colors[i + 2] = color.b * 0.3;
            }

            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({
                size: 2,
                vertexColors: true,
                transparent: true,
                opacity: 0.6,
                sizeAttenuation: true
            });

            const particleSystem = new THREE.Points(geometry, material);
            scene.add(particleSystem);
            particles.push(particleSystem);
        }

        function onMouseMove(event) {
            mouseX = (event.clientX - windowHalfX) * 0.001;
            mouseY = (event.clientY - windowHalfY) * 0.001;
            
            // Actualizar raycaster
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;
        }

        function onTouchMove(event) {
            if (event.touches.length === 1) {
                mouseX = (event.touches[0].clientX - windowHalfX) * 0.001;
                mouseY = (event.touches[0].clientY - windowHalfY) * 0.001;
                
                mouse.x = (event.touches[0].clientX / window.innerWidth) * 2 - 1;
                mouse.y = - (event.touches[0].clientY / window.innerHeight) * 2 + 1;
            }
        }

        function onDocumentClick() {
            // Efecto de interacci贸n al hacer click
            hearts3D.forEach(heart => {
                heart.scale.setScalar(1 + Math.random() * 0.5);
            });
        }

        function animateThreeJS() {
            requestAnimationFrame(animateThreeJS);

            const time = Date.now() * 0.001;

            // Movimiento de c谩mara INMERSIVO - sigue el mouse suavemente
            camera.position.x += (mouseX * 200 - camera.position.x) * 0.02;
            camera.position.y += (-mouseY * 200 - camera.position.y) * 0.02;
            
            // Rotaci贸n de c谩mara sutil para efecto de vuelo
            camera.rotation.z = mouseX * 0.1;
            camera.rotation.x = mouseY * 0.05;

            camera.lookAt(scene.position);

            // Animar corazones
            hearts3D.forEach((heart, index) => {
                heart.rotation.y += 0.01;
                heart.rotation.x += 0.005;
                
                // Movimiento orbital suave
                heart.userData.angle += heart.userData.speed;
                heart.position.x = heart.userData.originalPosition.x + Math.sin(time + heart.userData.angle) * 5;
                heart.position.y = heart.userData.originalPosition.y + Math.cos(time * 0.7 + heart.userData.angle) * 3;
                
                // Pulsaci贸n
                const pulse = Math.sin(time * heart.userData.pulseSpeed + index) * 0.3 + 1;
                heart.scale.setScalar(pulse);
            });

            // Animar textos flotantes
            floatingTexts.forEach((text, index) => {
                text.rotation.y += 0.008;
                text.rotation.x += 0.004;
                
                text.position.y = text.userData.originalPosition.y + Math.sin(time * 0.5 + index) * 4;
                text.position.x = text.userData.originalPosition.x + Math.cos(time * 0.3 + index) * 2;
            });

            // Raycasting para interacci贸n
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects([...hearts3D, ...floatingTexts]);
            
            if (intersects.length > 0) {
                intersects[0].object.scale.setScalar(1.5);
            }

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            windowHalfX = window.innerWidth / 2;
            windowHalfY = window.innerHeight / 2;

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // ========== MQUINA DE ESCRIBIR ==========
        function startTypewriter() {
            const message = document.querySelector('.message');
            const originalText = message.textContent;
            message.textContent = '';
            
            let i = 0;
            const typeWriter = () => {
                if (i < originalText.length) {
                    if (originalText.charAt(i) === '\\' && originalText.charAt(i + 1) === 'n') {
                        message.textContent += '\n';
                        i++;
                    } else {
                        message.textContent += originalText.charAt(i);
                    }
                    i++;
                    setTimeout(typeWriter, 100);
                }
            };
            setTimeout(typeWriter, 1000);
        }

        // ========== EVENT LISTENERS ==========
        overlay.addEventListener('click', init);
        overlay.addEventListener('touchend', init, { passive: false });

        toggleAudioBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
                audioIcon.className = 'fas fa-volume-mute';
            } else {
                audio.play();
                audioIcon.className = 'fas fa-volume-high';
            }
            isPlaying = !isPlaying;
        });
    </script>
</body>
</html>
